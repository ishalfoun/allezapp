
[new proj instructions]
-create new folder, git init, create git, link and push
-npm install -g @vue/cli
-vue create allezapp
	-vue 2
	-babel, router, vuex, css, linter
	-history:no
	-sass/scss (node)
	-eslint+airbnb
	-lint on save
	-in package.json
-cd allezapp
-npm run serve
-had to change the firebase.json fle:
hosting: public
to:
hosting: dist


setup firebase db + auth + hosting
plan:
[x] -set up firebase db
[x]-create each file for {user/profile/Navbar}
[x]	-login + st
	
-----------------

[todo]
[x] -so new routes adding works
[x] -old routes deleting works
[x] -make the profileroutes init with the profile
[x] -pRs also include rating and route
[x] 	-test by creating new routes and sync

[x]  profile needs last-updated field
[x]		-this is set when getRoutes succeeds
[x]  input: table called 'last-update'
[x] 	- when I add a route, last-update
		  gets filled in with 19.3.2020 6:32
[x]  check:
		-when logging in, compared last-u
		-if same do nothing
		-if diff: sync.
[x] Input Mode:
[x]	(pictured)
	-back, clear, enter/New, enter/Next


publish:
-make a new page, here all changes are compiled
[x] Publish.vue
	-all additions i made
	-all deletions i made
	-(check each routeNum and Rating to see diffs)
	-commit button
		-this will save changes to routes_real
		-update the old file to get things from routes_real
[x] what if i duplicated a route by accident.
[x] what if they replace a route by the same rating..... and it doesnt show on either addition or removal


-maybe we dont need the whole big if statements
	- just get all literal additions
	- and get all literal deletions
	- and show.
	-if i overwrite, its my bad and will be a new route.
		-thats why i must check what i delete and add.
		-if add and rem show same
			-then i decide:
				if replaced: leave it as is
				if my mistake: undo both.
				
    // old:
    // 1 - loop through routes
    // 2 - if it doesnt exist in routesReal, = an addition i made
    // 3 - if it exists, check if it is at it's own first found index
    //   - if not, it is a duplicate.
    //    -check how often it exists.
    //      -if twice
    //        -check if routesReal also has it twice....
    //          - if more than twice = a deletion I made +(flag it)
    //          - if less = an addition I made +(flag it for del)
    //          - if yes = do nothing.
    // 4 - loop through routesReal
    // 5 - if it doesnt exist in routes, = a removal i made
    // 6 - if it exists, check if it is at it's own first found index (dupe)
    // 7 -  if not, its a dupe that is now single = a removal i made

[plan]
[x] additions:
	-check by id (routes:routesReal)
[x] del 
	-check by id (routes:routesReal)
[x] disply with indiv del btn
[x] have a final commit button:
	-commits myroutes:
		-adds all additi./del all del's
		-to routesReal
	-make sure both are in sync
		-then clear add/del's
		


[problems now:]
publish:
[x]	-when fresh loading, its perfect.
[x]	-commit refreshing the table no works
[x]	-input: delete rec's, doesnt update
[x]	-input: add rec's, doesnt update
[x]	-when switching page, not update
	
	
routes = what i edit in input
routesreal = edits after commit
profileroutes: takes from routesreal

todo:
profileroutes:
[x] change original db to routesReal
[x] hide profiles from normal user.	

TODO::
[x] fix navbar in mobile view (name overlaps)
[x] fix when rerouting, navbar menu should close.
[x] can add empty routes!!
[x] only accessible by me
	-put a rule: if profileid = ...
[x] when clicking 8 or 9, disable a-d
[x] 	  allow empty 5.10s?(otherwise {a-d} req'd)
[x] make + button green when you selected two things.
[x] dont accepta PLUS if no letter is selct'd
[NB] if last update is returning nothing, show on screen 'no new update'
[NB] make the 'get from server' force the update even if last upd is no good, in sidemenu
[X] make sure deleting in input does not update last updated
[x] its not checking for updates when clicking 'allezApp' at the top (rerouting problem)

DESIGN:
[x] color everything in th esame
[x] number is location !!!
[NB] sort button says Rating/Number
[x] filter: dropdownappears with 3 choices 
btncentered
[x] in menu:legend : pops up a closable legend
[x] make the navbar and top part not scroll
	
[x] check if when hosting via firebase, if the rules get updated to allow all
	-do at end, when uploading
[x] - add icons (autobelay, etc)
	- check which roues are auto (10-14)
	- these routes will 
	

method 1:
[x]  -input: 
		buttons for all those
[x]	-routes has 
		'flag_autob: true'
		'flag_overh: true'
		'flag_lead: true'
		'flag_topr: true'
	-this goes to all records.
[x]		-commit -> routesReal
[x]		-watch.profile() -> profileRoutes
	

[NB] whle profile is loading shit
	-set to loading
	-loading done when profle.lastUpdate write success
[x] bug: input; if only licking a letter, + lights up, and a ?c can be added
[x] bug input: if clicking left or right arrows, plus stays light up
[x] input: when clicking anything, it turns yellow, and plus btn is green.
    add colors of routes!!!!
[x]  -input: 
		buttons for all those
[x]	-routes has 
		color: [red, blue, green, white, black, orange, pink]
	-this goes to all records.
[x]		-commit -> routesReal
[x]		-watch.profile() -> profileRoutes
[x] see it in input, publish, home
[x] home: make b-table sortable for column completed


todo:

Statistics:
-a new page:
-h1: routes i did today:
-h1 previous routes: (sort by date)

(When you check off a route, it gets saved to statistics table
Fields:
(Route/rating/flags) (dayCompleted) (profile id)

at end you view:
	-routes climbied today:
	-# climbed this weeek...

[x] when opening edit modal, reset notes
[x] in edit modal:
[x]	btn func: attempted+ completed
[x]	they create an entry as a string in an array?
[x] view modal:
	8/21: (L) {notes)
[x] New way to Complete:
	- clicking the entire row opens a popup
	- here you can ceheck 'did it on lead/tr'
	- comment secion
		
[x] editmode:
	-have date input limit of 9 chars.
[x] each route needs a date added orig
	-view it in edit and modal
	-may need to set it at time of setting the route
		
[x] edit btn: change onclick to whole row
[x] add icon

[x] titles
[x] in edit modal: disable tr if no tr, lead if no lead.
	-modalProps has the route flags
	-make the radio btns disabled if flags
[x] on non autobelay routes: in edit modal: autoB option should be gone.
[x] on autob routes: in edit modal: topr and lead should be gone, unless if allowed.

[x] center the route set date in editmodal
[x] 		completed btn: centerd
		icons in middle
		
[x] add the setting for default climbing:
	-in menu
	-top: yellow (left)
	-lead: red (right)
	
	
	
[x] when you log in it gets the value
[x]	1. make it so when you refresh, the t/l persist in navbar
[x]	2. make the modal use the value 
[x] when you change it, it persists.

[x] fix profile bug
	problem:
	when logging in and calling 'getRoutes',
		in the first check, profile.lastupdate=0
		1. trying to not save in db as .toDate
		-nvm, there was no update bc no new routes added
	[] why is the profile.lastUpdate = 0 at start of getRoutes()?
	[x] before calling getroutes, also 0
	[x] profile in db has correct date. (being saved)
	!! profile lvl is also always 0!!
	fix is doc.data() in profile.js
	
[x] make sure attempt works.
[x] route added in editmodal: show actual date (not working)

[NB] in viewmodal:
nb	-have a table instead of v-for
nb	sortable by date, then by dateAd
nb	-table is filled by entries obv.

pu: 7

for now:
[x] remove the delet button
[x] green C = completed
[x] yellow A = attempted
[x] lead toprope:
	[x]-menu option decides default sel
	[x] when creating the attempt, the lead/tr needs to be saved
	
	[x] bug with the radio:
		-they just function as images, they dont modify the actual modalProps.
				
		finding#1:
		-without the onEditRoute assignment, it works.
		=any code here makes the entire radio not work.
		
		-one you clicky first, the entire thing will never work again.
		-if you click the radio first, all is good.
		
		#problem now:
		-default does not work (any code will stop it)
		### FIX:
		the var switchTopLeadAuto
		has to be outside of modalProps.
				
	[x] if it is a completed, instead of setting it to complete, set it to lead_cmp
	[x] if it is a attempt, instead of setting it to attempt, set it to lead_cmp=A
	[x] second logic:
		-if not yet lead completed, and new lead, set lead cmp
		-if not yet top complt, and new top, st top_cmp
	[x] show in home page lead_cmp and top_cmp
	[x] show in view attempt
	
[x] remove the *
[x] code the legend

-	in the 'location'column:
	-the number represents where in the gym the route is
	-the icons represent what type of route it is:
		(a) = autobelay
		(t) = toprope able
		(l) = leadable
	-use the botton on the right end of each line if you attempted or completed a route.
		you can add personal notes or modify the date
	-(attempt) = means you only attempted the route
	-(cmp) = means you also completed the route.
	
[x]desktop mode:
[x]	-move everything down a bit
[x]	-have the left be: name - V
[x]	-fill in the menu
	-logout
	-default: tr/lead
	-input publish
[x] in viewmodal: make icons
	-need a yellow icon for attempt
	-this for cmp=A. cmp=Y is carab.
	
	
	
	
	
	
fixes:
[x] fix permission error when adding a route?
'FirebaseError: The caller does not have permission'
	-need to find out if the solution will be to add a route in rules in firebase.
		-error was firebase permissions was set to write: true for all while testing, added a /*/* in firestore rules.
[x] make a checkbox 'make public' (named checkboxcustom for now.
	-if this is set to true,
		when clicking on completed
		or attempted,
			this will be recorded in new table: routeComments
			-you can write a comment to a new table: routeComments
	modalComplete():
		-if (postpublic)
		{
			newRecord = same fields
			await db.coll('routecomments').add(newRecord)
		}
		
		
		
		
	cmp:
	-add the new enty to subcollection of profilerouts
	-if lead, set profileroutes lead_cmp=Y
	-elif top, set profileroutes top_cmp=Y
	-elif autob, set profilesrouts autob_cmp='Y'
	-refresh componentke
		
		
	att:
	-add new entry sub collection of profil [x]
	-if lead, 
		and if lead_cmp !=Y, 
			and if Attempt
				set lead_cmp=A
			if cmp
				set lead_cmp=Y
	-elif top, 
	*****and if top_cmp !=y, set top_cmp = A

if attempt
	if lead
	'

A = ATTEMPT
 L = LEAD
  Y = PREVIOUS STATE OF L/T_CMP
 T = TOPROPE
C = COMPLETE
  A = PREVIOUS STATE 
ALY - DO NOTHING
ALA - DO NOTHING
AL_ - PUT 'A'@L
ATY - DO NOTHING
ATA - DO NOTHING
AT_ - PUT 'A'@T
CLY - DO NOTHING
CLA - PUT 'C'@L
CL_ - PUT 'C'@L
CTY - DO NOTHING
CTA - PUT 'C'@T
CT_ - PUT 'C'@T

AL_ - PUT 'A'@L
AT_ - PUT 'A'@T
CLA - PUT 'C'@L
CL_ - PUT 'C'@L
CTA - PUT 'C'@T
CT_ - PUT 'C'@T

if attempt 
  if lead
    if prev=''
      PUT 'A'@L
  if top 
    if prev=''
      PUT 'A'@T
if cmp
  if lead
    if prev='A'
    or if prev=''
      PUT 'C'@L
  if top
    if prev='A'
    or if prev=''
	  PUT 'C'@T

ALY - DO NOTHING
ALA - DO NOTHING
ATY - DO NOTHING
ATA - DO NOTHING
CLY - DO NOTHING
CTY - DO NOTHING

[x] fix logic for modalSubmit
[x] fix icon position of cmp's
in view modal:
[x] show heading 'your attempts:'
	-then your attempts
[x] then another heading halfway down that says 'public comments':
[x]-have a v-for with:
	(test data first)
	-same fields, (type, cmp, date, comments
	-but the commend field is bigger
	-and there is a name (First L.)
	-and the profile pic
	
why is there a profile?
so that you can change username, or change image
user is the login
	-only set profile.name if user requests it
		-or at first login

right now:
[x] 1. make the profile have the username 
	-only set profile.name if user requests it
		-or at first login
[x] 2. show the name and pic again in navbar
[] 3. put the name and pic in the comment
[] 4. show this.
	
green 11c: 58
white 11b: 58
black 10c: 59
blue 12c: 60
yrll 5.9 (60)
black 10c: 61
red 12a: 61
green 11b: 62
	
[]	shows this table, where the route id matches with route id to show all comments for that route
		-show real records
[] rate a route with stars?


small stuff:	
[] put route added in the view, not in add att
[] if youc omplee a autob, the icon is a autob
	-edit modal also changes for autob
[] in add attempt, remove title add attempt
[] change icon from notebook to plus



[] FILTER BUTTON
[] add back the div at top of home.vue for the filter btn func
[] another button beside filter: called settings:
[]   - choose between easy-medium-hard
[]   - chose to disclude autobelays ... etc
[] show at bottom 35/75 cmp
[] statistics page:
	-see % or routes completed
	-see which routes you did per day

[] default highlighted icon needs 
	to be overridden when not available for the route



[] make the hard reset posible in side menu
this  manually refresh all profileroutes:
	-this function resets your profile date so you refresh for sure.
[] input mode: implem a delete lock (if on, the delete all btn also moves to right)

input colors + icons

[x] at flags in edit modal
[] Sort by completed
[] Cmp option: attempted (yellow)
[] Input mode: top rope, lead, etx
[] Click next: keep selected fields
[] Put a question mark possiblity
[] Add autobelays/ toprope only to entry
[] Have a shifter in input:
[] Autobelays - lead/top - top  - lead
[] bug: dont resort when cmp a route?
[] fix desktop sizes
[] defaults in edit modal: 
	-add default setting in menu
	-this is saved in profile
	-retrieved during edit modal.


[] fix db redundancy:
-have the stats entry be 1-1 with profile routes:
	[x] -stats have profileroutesid
	[x] -profile id
	[x] -route id
	[x] -flags,color,etc
	
todo:
dataJS.js: 64:
rewrite the whole thing:
-parent stats record has:
	-flags,color, ids
-child stats record has:
	-cmp, date, notes
	-no flags

[] stats.entries[]:
	-has entries of:
	[x]	-cmp date notes dateAd (what is already only disp anyways)
	[] remove the flags
[] input mode:
	-two icons are the same (overhang missing)
[] close navbar menu when clicking on navbar as well
[] navbar: close navbar 2 seconds after changing default (fade out?)
[] make the date be a calendar datepicker
[] db rules: make table user not readable unless you are signed in?
[] dataJS.js fix code: put the firestore fuctions in a function, to not repeat them.
[]input mode: when clicking autob, disclick all other types
[] if you did the route in autob, and its only autob/able, then set it cmp